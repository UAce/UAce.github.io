<!DOCTYPE html> <html lang="en-US"> <head> <title>Dockerfile: Difference between ENTRYPOINT and CMD - Yu-Yueh Liu</title> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale = 1.0, maximum-scale=1.0, user-scalable=no"/> <meta name="apple-mobile-web-app-capable" content="yes"/> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha384-Q8BgkilbsFGYNNiDqJm69hvDS7NCJWOodvfK/cwTyQD4VQA0qKzuPpvqNER1UC0F" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/zenburn.min.css"> <link rel="stylesheet" href="/assets/css/style.css"> <link rel="shortcut icon" class="favicon" type="image/svg" href="/assets/images/UA_favicon_dark.svg"> <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha384-Zm+UU4tdcfAm29vg+MTbfu//q5B/lInMbMCr4T8c9rQFyOv6PlfQYpB5wItcXWe7" crossorigin="anonymous"></script> <script src="https://unpkg.com/sweet-scroll@4.0.0/sweet-scroll.min.js" integrity="sha384-YeNQy+x5Gp48/m1w+zup7sXeNzVPCC14WVR6+jevxGxvRw/1grCNT4QBzGg8b+ov" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js" integrity="sha384-3u0U01MLvyGLlqCxH5vNw55TTJ2zWaZDnxbCYz81kDzq3RYYXMVSDPLxPJu+jcCg" crossorigin="anonymous"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script> <script>hljs.initHighlightingOnLoad();</script> <script>hljs.initLineNumbersOnLoad();</script> <script src="/assets/js/common.js"></script> <script src="/assets/js/check-dark-theme.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-168212953-1"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-168212953-1");</script> <title>Dockerfile: Difference between ENTRYPOINT and CMD | Yu-Yueh Liu</title> <meta name="generator" content="Jekyll v3.8.7"/> <meta property="og:title" content="Dockerfile: Difference between ENTRYPOINT and CMD"/> <meta name="author" content="Yu-Yueh Liu"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="I have been working with Docker for over a year now but there are still a lot of things that I do not understand about, and things that I thought I knew but were wrong such as the difference between ENTRYPOINT and CMD instructions in a Dockerfile. I always thought the only difference was that CMD can be overriden and that they were mutually exclusive since Docker containers needed a starting process. In fact, they are not mutually exclusive and understanding the difference between them could be very useful when building Dockerfiles! Docker ENTRYPOINT An ENTRYPOINT is used to configure a container to run as an executable and it has two forms: The exec form (preferred): ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] Command line arguments provided to docker run &lt;image&gt; will be appended after all elements of the array. For example, if you need to provide a third parameter to the above ENTRYPOINT, you can run docker run &lt;image&gt; param3. Moreover, it is possible to override the ENTRYPOINT using docker run --entrypoint. The exec form is parsed as a JSON array, which means that you must use double-quotes (&quot;) around words not single-quotes (&#39;) and backslashes need to be escaped. The shell form: ENTRYPOINT command param1 param2 This form prevents any command line arguments to be provided to the ENTRYPOINT and will start the executable as a subcommand of /bin/sh -c. The executable will not be the container&#39;s PID 1 which does not pass Unix signals. Docker CMD A CMD is used to provide defaults for an executing container. The defaults can be an executable, command and/or parameters. Unlike ENTRYPOINT, CMD has 3 forms: The exec form (preferred): CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] Although it looks similar to the ENTRYPOINT exec form, command line arguments provided to docker run &lt;image&gt; will override the default CMD defined in the Dockerfile. The default arguments form (used with ENTRYPOINT): CMD [&quot;param1&quot;, &quot;param2&quot;] This form is used when both ENTRYPOINT and CMD instructions are specified. ENTRYPOINT will define the executable and parameters to run, whereas CMD will define additional default parameters, overridable by command line arguments provided to docker run &lt;image&gt;. The shell form: CMD command param1 param2 Similar to the exec form, command line arguments provided to docker run &lt;image&gt; will override the default CMD defined in the Dockerfile. However, the shell form will invoke a command shell and allow normal shell processing such as variable substitution. Conclusion Both ENTRYPOINT and CMD instructions allow containers to run as executable but they are not mutually exclusive. If you need to override the default executable, then you might want to use CMD. If you would like your container to run the same executable every time, then you should consider using ENTRYPOINT with CMD. References ENTRYPOINT Dockerfile reference CMD Dockerfile reference Docker Entrypoint vs CMD: Solving the Dilemma"/> <meta property="og:description" content="I have been working with Docker for over a year now but there are still a lot of things that I do not understand about, and things that I thought I knew but were wrong such as the difference between ENTRYPOINT and CMD instructions in a Dockerfile. I always thought the only difference was that CMD can be overriden and that they were mutually exclusive since Docker containers needed a starting process. In fact, they are not mutually exclusive and understanding the difference between them could be very useful when building Dockerfiles! Docker ENTRYPOINT An ENTRYPOINT is used to configure a container to run as an executable and it has two forms: The exec form (preferred): ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] Command line arguments provided to docker run &lt;image&gt; will be appended after all elements of the array. For example, if you need to provide a third parameter to the above ENTRYPOINT, you can run docker run &lt;image&gt; param3. Moreover, it is possible to override the ENTRYPOINT using docker run --entrypoint. The exec form is parsed as a JSON array, which means that you must use double-quotes (&quot;) around words not single-quotes (&#39;) and backslashes need to be escaped. The shell form: ENTRYPOINT command param1 param2 This form prevents any command line arguments to be provided to the ENTRYPOINT and will start the executable as a subcommand of /bin/sh -c. The executable will not be the container&#39;s PID 1 which does not pass Unix signals. Docker CMD A CMD is used to provide defaults for an executing container. The defaults can be an executable, command and/or parameters. Unlike ENTRYPOINT, CMD has 3 forms: The exec form (preferred): CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] Although it looks similar to the ENTRYPOINT exec form, command line arguments provided to docker run &lt;image&gt; will override the default CMD defined in the Dockerfile. The default arguments form (used with ENTRYPOINT): CMD [&quot;param1&quot;, &quot;param2&quot;] This form is used when both ENTRYPOINT and CMD instructions are specified. ENTRYPOINT will define the executable and parameters to run, whereas CMD will define additional default parameters, overridable by command line arguments provided to docker run &lt;image&gt;. The shell form: CMD command param1 param2 Similar to the exec form, command line arguments provided to docker run &lt;image&gt; will override the default CMD defined in the Dockerfile. However, the shell form will invoke a command shell and allow normal shell processing such as variable substitution. Conclusion Both ENTRYPOINT and CMD instructions allow containers to run as executable but they are not mutually exclusive. If you need to override the default executable, then you might want to use CMD. If you would like your container to run the same executable every time, then you should consider using ENTRYPOINT with CMD. References ENTRYPOINT Dockerfile reference CMD Dockerfile reference Docker Entrypoint vs CMD: Solving the Dilemma"/> <link rel="canonical" href="https://uace.github.io/2021/02/25/dockerfile-difference-between-entrypoint-and-cmd/"/> <meta property="og:url" content="https://uace.github.io/2021/02/25/dockerfile-difference-between-entrypoint-and-cmd/"/> <meta property="og:site_name" content="Yu-Yueh Liu"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2021-02-25T04:05:00+00:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Dockerfile: Difference between ENTRYPOINT and CMD"/> <script type="application/ld+json">
{"description":"I have been working with Docker for over a year now but there are still a lot of things that I do not understand about, and things that I thought I knew but were wrong such as the difference between ENTRYPOINT and CMD instructions in a Dockerfile. I always thought the only difference was that CMD can be overriden and that they were mutually exclusive since Docker containers needed a starting process. In fact, they are not mutually exclusive and understanding the difference between them could be very useful when building Dockerfiles! Docker ENTRYPOINT An ENTRYPOINT is used to configure a container to run as an executable and it has two forms: The exec form (preferred): ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] Command line arguments provided to docker run &lt;image&gt; will be appended after all elements of the array. For example, if you need to provide a third parameter to the above ENTRYPOINT, you can run docker run &lt;image&gt; param3. Moreover, it is possible to override the ENTRYPOINT using docker run --entrypoint. The exec form is parsed as a JSON array, which means that you must use double-quotes (&quot;) around words not single-quotes (&#39;) and backslashes need to be escaped. The shell form: ENTRYPOINT command param1 param2 This form prevents any command line arguments to be provided to the ENTRYPOINT and will start the executable as a subcommand of /bin/sh -c. The executable will not be the container&#39;s PID 1 which does not pass Unix signals. Docker CMD A CMD is used to provide defaults for an executing container. The defaults can be an executable, command and/or parameters. Unlike ENTRYPOINT, CMD has 3 forms: The exec form (preferred): CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] Although it looks similar to the ENTRYPOINT exec form, command line arguments provided to docker run &lt;image&gt; will override the default CMD defined in the Dockerfile. The default arguments form (used with ENTRYPOINT): CMD [&quot;param1&quot;, &quot;param2&quot;] This form is used when both ENTRYPOINT and CMD instructions are specified. ENTRYPOINT will define the executable and parameters to run, whereas CMD will define additional default parameters, overridable by command line arguments provided to docker run &lt;image&gt;. The shell form: CMD command param1 param2 Similar to the exec form, command line arguments provided to docker run &lt;image&gt; will override the default CMD defined in the Dockerfile. However, the shell form will invoke a command shell and allow normal shell processing such as variable substitution. Conclusion Both ENTRYPOINT and CMD instructions allow containers to run as executable but they are not mutually exclusive. If you need to override the default executable, then you might want to use CMD. If you would like your container to run the same executable every time, then you should consider using ENTRYPOINT with CMD. References ENTRYPOINT Dockerfile reference CMD Dockerfile reference Docker Entrypoint vs CMD: Solving the Dilemma","author":{"@type":"Person","name":"Yu-Yueh Liu"},"@type":"BlogPosting","url":"https://uace.github.io/2021/02/25/dockerfile-difference-between-entrypoint-and-cmd/","headline":"Dockerfile: Difference between ENTRYPOINT and CMD","dateModified":"2021-02-25T04:05:00+00:00","datePublished":"2021-02-25T04:05:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://uace.github.io/2021/02/25/dockerfile-difference-between-entrypoint-and-cmd/"},"@context":"https://schema.org"}</script> </head> <body> <link rel="icon" id="light-favicon" href="/assets/images/UA_favicon_light.svg" type="image/svg"/> <link rel="icon" id="dark-favicon" href="/assets/images/UA_favicon_dark.svg" type="image/svg"/> <button id="scroll-to-top" title="Scroll to top">Top</button> <nav id="navbar" class="navbar fixed-top navbar-expand-sm justify-content-between"> <div class="container"> <a class="navbar-brand mb-0 h1 add-margin-left-normal add-padding-bottom-small" href="/"> <img src="/assets/images/UA_favicon_dark.svg" width="40" height="30" class="d-inline-block home-logo favicon" alt="UA"> <span class="home-title">Yu-Yueh Liu</span> </a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation" onclick="toggleNavbar()"> <span class="navbar-toggler-icon"></span> </button> <div class="collapse navbar-collapse" id="navbarNavAltMarkup"> <div class="navbar-nav nav nav-pills ml-auto text-right"> <a class="nav-item nav-link " id="tab-Articles" href="/articles">Articles</a> <a class="nav-item nav-link " id="tab-Resume" href="/resume">Resume</a> <a class="nav-item nav-link " id="tab-About me" href="/about">About me</a> <a id="theme-icon-wrapper" onclick="modeSwitcher()"><i id="theme-icon" class="icon fas fa-lg"></i></a> </div> </div> </div> </nav> <main class="main-body"> <article class="container post-container"> <header class="post-header"> <h1 class="post-title">Dockerfile: Difference between ENTRYPOINT and CMD</h1> <p class="post-meta"> <a href="/about#me"> <img src="/assets/images/yueh.png" width="48" height="48" class="icon-avatar img-fluid img-thumbnail" alt="Me"> </a> <time class="post-datetime" datetime="2021-02-25T04:05:00+00:00">Feb 25, 2021 </time> <span class="bullet-before"> </span><i class="far fa-clock"></i> 3 min to read </p> <span class="post-tags"> <a href="_blank" class="tag" data-proofer-ignore> <span>Docker</span> </a> <a href="_blank" class="tag" data-proofer-ignore> <span>Dockerfile</span> </a> </span> </header> <div class="post-body"> <p> I have been working with Docker for over a year now but there are still a lot of things that I do not understand about, and things that I thought I knew but were wrong such as the difference between ENTRYPOINT and CMD instructions in a Dockerfile. </p> <p> I always thought the only difference was that CMD can be overriden and that they were mutually exclusive since Docker containers needed a starting process. In fact, they are not mutually exclusive and understanding the difference between them could be very useful when building Dockerfiles! </p> <h3>Docker ENTRYPOINT</h3> <p>An ENTRYPOINT is used to configure a container to run as an executable and it has two forms:<br/></p> <p> The <i><b>exec</b></i> form (preferred):<br/> <pre class="highlight"><code>ENTRYPOINT ["executable", "param1", "param2"]</code></pre> Command line arguments provided to <code class="inline-code">docker run &lt;image&gt;</code> will be appended after all elements of the array. For example, if you need to provide a third parameter to the above ENTRYPOINT, you can run <code class="inline-code">docker run &lt;image&gt; param3</code>. Moreover, it is possible to override the ENTRYPOINT using <code class="inline-code">docker run --entrypoint</code>. The exec form is parsed as a JSON array, which means that you must use double-quotes (") around words not single-quotes (') and backslashes need to be escaped. </p> <p> The <i><b>shell</b></i> form:<br/> <pre class="highlight"><code>ENTRYPOINT command param1 param2</code></pre> This form prevents any command line arguments to be provided to the ENTRYPOINT and will start the executable as a subcommand of <code class="inline-code">/bin/sh -c</code>. The executable will not be the container's PID 1 which does not pass Unix signals. </p> <h3>Docker CMD</h3> <p>A CMD is used to provide defaults for an executing container. The defaults can be an executable, command and/or parameters. Unlike ENTRYPOINT, CMD has 3 forms:<br/></p> <p> The <i><b>exec</b></i> form (preferred):<br/> <pre class="highlight"><code>CMD ["executable", "param1", "param2"]</code></pre> Although it looks similar to the ENTRYPOINT exec form, command line arguments provided to <code class="inline-code">docker run &lt;image&gt;</code> will override the default CMD defined in the Dockerfile. </p> <p> The <i><b>default arguments</b></i> form (used with ENTRYPOINT):<br/> <pre class="highlight"><code>CMD ["param1", "param2"]</code></pre> This form is used when both ENTRYPOINT and CMD instructions are specified. ENTRYPOINT will define the executable and parameters to run, whereas CMD will define additional default parameters, overridable by command line arguments provided to <code class="inline-code">docker run &lt;image&gt;</code>. </p> <p> The <i><b>shell</b></i> form:<br/> <pre class="highlight"><code>CMD command param1 param2</code></pre> Similar to the exec form, command line arguments provided to <code class="inline-code">docker run &lt;image&gt;</code> will override the default CMD defined in the Dockerfile. However, the shell form will invoke a command shell and allow normal shell processing such as variable substitution. </p> <h3>Conclusion</h3> <p>Both ENTRYPOINT and CMD instructions allow containers to run as executable but they are not mutually exclusive. If you need to override the default executable, then you might want to use CMD. If you would like your container to run the same executable every time, then you should consider using ENTRYPOINT with CMD.</p> <h3>References</h3> <ul> <li><a href="https://docs.docker.com/engine/reference/builder/#entrypoint" target="_blank" class="bold">ENTRYPOINT Dockerfile reference</a></li> <li><a href="https://docs.docker.com/engine/reference/builder/#cmd" target="_blank" class="bold">CMD Dockerfile reference</a></li> <li><a href="https://phoenixnap.com/kb/docker-cmd-vs-entrypoint" target="_blank" class="bold">Docker Entrypoint vs CMD: Solving the Dilemma</a></li> </ul> </div> </article> </main> <footer> <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" integrity="sha384-ujbKXb9V3HdK7jcWL6kHL1c+2Lj4MR4Gkjl7UtwpSHg/ClpViddK9TI7yU53frPN" crossorigin="anonymous"></script> <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script> <script src="/assets/js/theme-switcher.js"></script> <div class="row align-items-center"> <span class="col-md-12 text-center"> © 2020 Yu-Yueh Liu ｜ <a href="https://www.youtube.com/watch?v=XvR-kTUad6U" target="_blank">Plus Ultra</a> ｜ <a href="feed.xml" data-proofer-ignore>RSS <i class="fas fa-rss"></i></a> ｜ <a href="sitemap.xml" data-proofer-ignore>Sitemap</a> </span> </div> </footer> </body> </html>